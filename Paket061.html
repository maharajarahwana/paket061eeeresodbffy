<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>Paket061</title>
    

  </head>
    
  <body>
  <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Paket061</title>  
  <body>
  <!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
body{font-family:Arial,Helvetica,sans-serif;margin:0;padding:0;background:#f7f7f7;color:#111}
.container{max-width:900px;margin:16px auto;background:#fff;padding:16px;box-shadow:0 2px 8px rgba(0,0,0,0.08)}
.header{display:flex;justify-content:space-between;align-items:center}
.timer{font-weight:700}
.nav-top{display:flex;flex-wrap:wrap;gap:8px;align-items:center;margin:12px 0}
#prevBtn,#nextBtn{padding:6px 10px}
.qnumbers{display:flex;flex-wrap:wrap;gap:6px}
.qnumbers button{width:34px;height:34px;border-radius:4px;border:1px solid #ccc;background:#fff}
.page{display:none}
.page.active{display:block}
.options{margin-top:12px;}
.option{display:block;padding:10px;border:1px solid #ddd;margin-bottom:8px;border-radius:6px;cursor:pointer}
.option .label{font-weight:700;margin-right:8px}
.option.selected{background:#e6f7ff;border-color:#80d0ff}
.bottom-submit{margin-top:24px;text-align:center}
#submitBtn{padding:10px 18px;font-size:16px}
.scoreBox{margin-top:20px;padding:12px;background:#eef9ea;border:1px solid #c6e8c0;display:none}
.disabled{pointer-events:none;opacity:0.6}
.audioPlayOnce{margin-left:8px}
.img-option{max-width:200px;display:block;margin-top:8px}
.question-img{max-width:100%;height:auto;margin-top:8px}
.top-controls{display:flex;gap:8px;align-items:center}
.footer-note{font-size:12px;color:#666;margin-top:8px}
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <div><h2>SoalMahmud061 - LPK URI ANSAN NGAWI</h2></div>
    <div class="timer">Sisa waktu: <span id="timer">50:00</span></div>
  </div>
  <div class="nav-top">
    <div class="qnumbers" id="qnumbers" aria-label="Nomor Soal"></div>
    <div class="top-controls">
      <button id="prevBtn">Sebelumnya</button>
      <button id="nextBtn">Berikutnya</button>
    </div>
  </div>

  <div id="pages" role="main" aria-live="polite"></div>

  <div class="bottom-submit">
    <button id="submitBtn">Submit</button>
    <div id="scoreBox" class="scoreBox" role="status" aria-live="polite"></div>
    <div class="footer-note">Setelah submit, jawaban tidak dapat diubah. Jika waktu habis, sistem akan otomatis submit.</div>
  </div>
</div>
<script>
// Embedded questions (no fetch)
const questions =[
  
  {"id": 1, "type": "mcq", "text": "[1 - 2] 다음 글을 읽고 내용과 같은 것을 고르십시오.<p>1. 한국은 한류, 역사적인 명소, 현대적인 도시 매력 등으로 세계적인 관광지로 자리 잡고 있습니다. 서울의 경복궁, 부산의 해운대, 제주도의 자연경관 등은 관광객들에게 인기가 많습니다. 또한, K-팝, 드라마, 영화 등 한류 문화와 연계된 체험 관광이 활성화되고 있습니다.", "options": ["서울에서는 관광객들이 한류 드라마와 K-팝을 체험할 수 없습니다.", "역사적인 명소뿐만 아니라 다양한 매력 등으로 관광지로 자리 잡습니다.", "한류 드라마와 K-팝은 관광객들이 한국을 방문할 이유가 되지 않습니다.", "한류 문화와 연결도지 않는 관광이 활성화되고 있습니다."], "answer": 2},
  {"id": 2, "type": "mcq", "text": "2. 외국인이 입국한 날부터 90 일을초과하여 대한민국에 체류하기 위해서는 입국한 날부터 90 일이내에 본인의 체류지를 관할하는 지방출입국 · 외국인관서(사무소 등)에 외국인 등록을 해야 합니다. 외국인 등록은 국내에 장기 체류 중인 외국인의 현황을 파악할 수 있습니다. 외국인 등록증은 은행 계좌를 개설하거나 휴대전화 개통 신청, 주거 계약 등 다양한 상황에서 신분증으로 사용될 수 있습니다. 외국인 등록증에는 개인에게 주어진 외국인 등록번호 와 함께 성명, 국가/지역, 체류 자격이 함께 표시됩니다.", "options": ["외국인 등록증은 단지 은행 업무에서만 사용됩니다.", "개인의 이름만 기재되며, 국가/지역 정보는 포함되지 않습니다.", "외국인 등록증은 다양한 상황에서 신분증으로 이용할 수 있습니다.", "출국 후 90 일 이내에 지방 출입국에 외국인 등록을 해야 합니다."], "answer": 3},
  {"id": 3, "type": "mcq", "text": "[3 - 4] 다음 글을 읽고 무엇에 대한 글인지 고르십시오.<p>3. 한국의 대중교통은 효율적이고 편리하며, 지하철, 버스, 택시, 고속철도(KTX) 등으로 구성됩니다. 지하철은 주요 도시에서 깨끗하고 정시성이 뛰어난 서비스 제공하고 버스는 도시 간, 내부 연결 및 전용차로로 신속한 이동 가능합니다. 또, 택시는 저렴하고 앱 호출 및 외국어 서비스 지원할 수 있습니다." , "options": ["대중 교통의 종류", "교통 수단을 사용법", "교통 신호 위반", "대중교통 결제"], "answer": 1},
  {"id": 4, "type": "mcq", "text": "4. 스트레스는 병의 원인이라는 말도 있습니다. 직장 및 일상 생활 속에서 여러 원인으로 발생하는 스트레스는 몸의 면역체계를 약화시키고 감기나 두통을 비롯한 각종 질병을 유발합니다. 이는 작업 능률의 저하 또는 작업 중 부주의로 이어져 사고를 야기할 수도 있습니다.", "options": ["스트레스의 결과", "스트레스의 원인", "스트레스 해소 방법", "스트레스의 관리"], "answer": 1},
  {"id": 5, "type": "mcq", "text": "[5 - 6] 다음 설명에 알맞은 어휘를 고르십시오.<p>5. 다년생 식물로 건강 보조 식품과 약재로 널리 사용됩니다. 대표적으로 한국, 중국, 미국에서 재배되며, 품질과 효능으로 세계적으로 유명합니다. 주요 성분으로는 사포닌(진세노사이드)이 있으며, 면역력 강화, 피로 회복, 혈액 순환 개선 등에 효과가 있다고 알려져 있습니다.", "options": ["생강", "마늘", "인삼", "대추"], "answer": 3},
  {"id": 6, "type": "mcq", "text": "6. 식품을 섭취할 수 있는 최종 기한을 의미합니다. 이는 해당 식품이 안전하고 품질을 유지하며 소비 가능한 기간을 나타냅니다. 날짜를 지나면 식품이 상하거나 변질되어 섭취가 위험할 수 있습니다.", "options": ["접수 기한", "포장 기한", "배송 기한", "유통 기한"], "answer": 4},
  {"id": 7, "type": "mcq", "text": "[7 - 8] 빈칸에 들어갈 가장 알맞은 것을 고르십시오.<p>7. 다음 주는 일주일 동안 회사에 가지 않습니다. 휴가 때 그동안 하지 못한 일을 ........, 산이나 바다에 가서 수영도 할 겁니다.", "options": ["하는 편 입니다.", "한 적이 있습니다.", "하는 것 같습니다.", "하려고 합니다."], "answer": 4},
  {"id": 8, "type": "mcq", "text": "8. 정비 작업을 할 때에는 다른 사람이 기계를 .......... 안전보건표지판 설치해야 합니다.", "options": ["관리하지 못하도록", "관리할 수 있 못하도록", "조작하지 못하도록", "조작할 수 있하도록"], "answer": 3},
  {"id": 9, "type": "mcq", "text": "[9 - 10] 다음 질문에 답하십시오.<p>9. 다음 단어와 관계있는 것은 고르십시오.<p>객실" , "options": ["여행지", "호텔", "기관", "주택"], "answer": 2},
  {"id": 10, "type": "mcq", "text": "10. 다음 단어의 반댓말은 무엇입니까 ?<p>(토막을) 내다", "options": ["자르다", "옮기다", "치다", "톱질하다"], "answer": 1},
  {"id": 11, "type": "mcq", "text": "[11 – 14] 빈칸에 들어갈 가장 알맞은 것을 고르십시오.<p>11. 인터넷으로 물건을 구입하면 일반적으로 매장보다 저렴합니다. 이러한 차이 .......... 때문에 인터넷 쇼핑을 하는 사람들이 많아지고 있습니다.", "options": ["장소", "가격", "방법", "품목"], "answer": 2},
  {"id": 12, "type": "mcq", "text": "12. 전통 한복은 평상복으로 입기에는 다소 불편한 점이 있어 요즘에는 전통 한복을 .......... 만든 생활한복을 입는 사람들이 많아지고 있습니다.", "options": ["개량해서", "개량하면", "노력해서", "노력하면"], "answer": 1},
  {"id": 13, "type": "mcq", "text": "13. 저는 기숙사에서 혼자 사니까 음식을 .......... 만들기 싫어합니다. 그래서 항상 옆식당에서 시켜서 먹습니다.", "options": ["따로", "직접", "제일", "미리"], "answer": 2},
  {"id": 14, "type": "mcq", "text": "14. 한국에서 생활 한지 1 년이 넘었지만 아직 한 번도 삼계탕을 .........., 오늘 퇴근 후에 동료와 같이 한식집에 가서 맛 보려고 합니다.", "options": ["먹지 않습니다", "먹는 것 같습니다", "먹은 적이 없습니다", "먹을 수 없습니다"], "answer": 3},
  {"id": 15, "type": "mcq", "text": "[15 - 18] 다음 질문에 답하십시오.<p>15. 다음 중 밑줄 친 부분이 맞는 문장을 고르십시오.", "options": ["배가 <u>아프는데</u> 약이 있어요?", "주소를 <u>모르는데</u> 어떻게 해요?", "기숙사에 <u>가은데</u> 같이 갈까요?", "오늘은 <u>덥은데</u> 내일 만날까요?"], "answer": 2},
  {"id": 16, "type": "mcq_img_options", "text": "16. 다음 내용과 관계있는 그림을 고르십시오.<p>사용설명서/책자를 참조하시오.", "img_options": ["16a1.jpg", "16a2.jpg", "16a3.jpg", "16a4.jpg"], "answer": 4},
  {"id": 17, "type": "mcq_img", "text": "17. 다음 글을 읽고 내용과 같은 것을 고르십시오.", "img": "17.jpg", "options": ["피자는 외국인이 가장 많이 좋아하는 음식입니다.", "중국 음식은 외국인이 가장 적게 좋아하는 음식입니다.", "두 번째로 많이 좋아하는 음식은 중국 음식입니다.", "버거와 파스타는 외국인에게 같은 인기를 누립니다."], "answer": 1},
  {"id": 18, "type": "mcq_img", "text": "18. 다음 글을 읽고 내용과 같은 것을 고르십시오.", "img": "18.jpg", "options": ["기타는 도장과 비계보다 더 많습니다.", "도장은 용접보다 더 많이 해야합니다.", "비계는 두 번째로 많이 해야할 일입니다.", "조선업에서 가장 많이 해야할 일은 용접입니다."], "answer": 4},
  {"id": 19, "type": "mcq_img", "text": "[19 - 20] 다음 그림을 보고 맞는 단어나 문장을 고르십시오.<p>19.", "img": "19.jpg", "options": ["풀입니다", "건초입니다", "먹이입니다", "분뇨입니다"], "answer": 2},
  {"id": 20, "type": "mcq_img", "text": "20.",  "img": "20.jpg", "options": ["버력을 퍼 올리내고 있습니다.", "버력을 골라내고 있습니다.", "버력을 깨고 있습니다.", "버력을 운반하고 있습니다."], "answer": 2},
  {"id": 21, "type": "mcq_audio", "text": "듣기 ( 20 문항 )<p>[ 21 – 24 ] 들은 것을 고르십시오.<p>21. 저는 보통 집에서 .......... 으로 영화를 봐요.", "audio": "21.mp3", "options": ["인터넷", "블로그", "홈페이지", "웹사이트"], "answer": 1},
  {"id": 22, "type": "mcq_audio", "text": "22. 친구하고 부산에 .......... 을 갈 거예요.", "audio": "22.mp3", "options": ["유행", "여행", "서행", "발행"], "answer": 2},
  {"id": 23, "type": "mcq_audio_img", "text": "23.", "audio": "23.mp3", "img_options": ["23a1.jpg", "23a2.jpg", "23a3.jpg", "23a4.jpg"], "answer": 4}, 
  {"id": 24, "type": "mcq_audio_img", "text": "24.", "audio": "24.mp3", "img_options": ["24a1.jpg", "24a2.jpg", "24a3.jpg", "24a4.jpg"], "answer": 2}, 
  {"id": 25, "type": "mcq_audio_img_mix", "text": "[ 25 – 29 ] 그림을 보고 알맞은 대답을 고르십시오.<p>25. 이것은 무엇입니까 ?", "audio": "25.mp3", "img": "25.jpg", "audio_options": ["25a1.mp3", "25a2.mp3", "25a3.mp3", "25a4.mp3"], "answer": 2},
  {"id": 26, "type": "mcq_audio_img_mix", "text": "26. 여기는 어디입니까 ?", "audio": "26.mp3", "img": "26.jpg", "audio_options": ["26a1.mp3", "26a2.mp3", "26a3.mp3", "26a4.mp3"], "answer": 1},
  {"id": 27, "type": "mcq_audio_img_mix", "text": "27.  이 사람은 무엇을 하고 있습니까 ?", "audio": "27.mp3", "img": "27.jpg", "audio_options": ["27a1.mp3", "27a2.mp3", "27a3.mp3", "27a4.mp3"], "answer": 2},
  {"id": 28, "type": "mcq_audio_img_mix", "text": "28. 귀덮개는 얼마나 있습니까?", "audio": "28.mp3", "img": "28.jpg", "audio_options": ["28a1.mp3", "28a2.mp3", "28a3.mp3", "28a4.mp3"], "answer": 3},
  {"id": 29, "type": "mcq_audio_img_mix", "text": "29. 휴게실은 어디에 있어요?", "audio": "29.mp3", "img": "29.jpg", "audio_options": ["29a1.mp3", "29a2.mp3", "29a3.mp3", "29a4.mp3"], "answer": 1},
  {"id": 30, "type": "mcq_audio", "text": "[ 30 – 33 ] 다음을 듣고 질문에 알맞은 대답을 고르십시오.<p>30.", "audio": "30.mp3", "options": ["소포가 도착하면 연락 드릴게요.", "익일 특급으로 보내면 내일 도착합니다.", "KTX 을 타면 부산에 빨리 도착할 수 있어요.", "서류를 보내려면 먼저 봉투에 넣으세요."], "answer": 4},
  {"id": 31, "type": "mcq_audio", "text": "31.", "audio": "31.mp3", "options": ["어떤 문제가 있는지 좀 말씀하세요.", "새로 노트북이 가벼워서 편하네요.", "문제가 생기면 바로 고객센터에 연락해요.", "갑자기 문제가 생겨서 걱정이에요."], "answer": 1},
  {"id": 32, "type": "mcq_audio", "text": "32.", "audio": "32.mp3", "options": ["네, 한국 친구 집에서 보냈어요.", "네, 맛있어서 많이 먹았어요.", "아니요, 처음 만드니까 좀 어려워요.", "아니요, 설날 때마다 고향에 내려요."], "answer": 2},
  {"id": 33, "type": "mcq_audio", "text": "33.", "audio": "33.mp3", "options": ["우리 회사는 시설이 아주 좋아요.", "취업을 해서 서울로 이사하려고 해요.", "삼성 회사에서 취직하고 싶어요.", "회사에 취직하러 면접을 많이 봤어요."], "answer": 3},
  {"id": 34, "type": "mcq_audio", "text": "[ 34 – 35 ] 다음을 듣고 이어지는 말을 고르십시오.<p>34.", "audio": "34.mp3", "options": ["회식에서 사람이 많이 이야기했어요.", "회식 일정이 바뀐다고 했어요.", "회사 규칙이니까 꼭 와야지요.", "우리 회사 앞에 뷔폐에서 했어요."], "answer": 4}, 
  {"id": 35, "type": "mcq_audio", "text": "35.", "audio": "35.mp3", "options": ["언제 부터 속이 안 좋아요?", "야채죽을 만들면 좋을 것 같아요.", "빨리 약국에 가서 소화제를 삽시다.", "속이 안 좋아서 찬 음식을 안 먹어요."], "answer": 2},
  {"id": 36, "type": "mcq_audio_img", "text": "[ 36 – 37 ] 잘 듣고 들은 내용과 관계있는 그림을 고르십시오.<p>36.", "audio": "36.mp3", "img_options": ["36a1.jpg", "36a2.jpg", "36a3.jpg", "36a4.jpg"], "answer": 4},
  {"id": 37, "type": "mcq_audio_img", "text": "37.", "audio": "37.mp3", "img_options": ["37a1.jpg", "37a2.jpg", "37a3.jpg", "37a4.jpg"], "answer": 3},
  {"id": 38, "type": "mcq_audio", "text": "[ 38 – 40 ] 이야기를 듣고 질문에 알맞은 대답을 고르십시오.<p>38. 여자가 왜 이 이야기를 하고 있는지 고르십시오.", "audio": "38.mp3", "options": ["대회 신청을 더 받으려고", "대회 날짜를 알려 주려고", "신청 방법을 설명해 주려고", "대회 장소가 바뀌었기 때문에."], "answer": 1},
  {"id": 39, "type": "mcq_audio", "text": "39. 대화를 듣고 내용과 같은 것을 고르십시오.", "audio": "39.mp3", "options": ["남자는 커피를 싫어합니다.", "여자는 커피를 주문할 겁니다.", "남자는 주스를 마시려고 합니다.", "여자는 아침에 케이크를 먹었습니다."], "answer": 3},
  {"id": 40, "type": "mcq_audio", "text": "40. 대화를 듣고 내용과 같은 것을 고르십시오.", "audio": "40.mp3", "options": ["여자는 식당에서 일합니다.", "남자는 식당에 간 적이 있습니다.", "여자는 서점의 위치를 잘 모릅니다.", "남자는 서점 옆에서 여자를 만날 것입니다."], "answer": 1}];

const ASSET_PATH = "assets/";
let answers = {};
let current = 0;
let submitted = false;
let totalSeconds = 50*60;
let timerInterval = null;
let audioPlayed = {};
let playingAudio = null;

function pad(n){return n<10? "0"+n:n;}

function startTimer(){
  const timerEl = document.getElementById('timer');
  function tick(){
    if(totalSeconds<=0){ clearInterval(timerInterval); autoSubmit(); return; }
    totalSeconds--;
    let m = Math.floor(totalSeconds/60);
    let s = totalSeconds%60;
    timerEl.textContent = pad(m)+":"+pad(s);
  }
  timerInterval = setInterval(tick,1000);
  tick();
}

function renderQNumbers(){
  const container = document.getElementById('qnumbers');
  container.innerHTML = "";
  questions.forEach((q,i)=>{
    const btn = document.createElement('button');
    btn.textContent = i+1;
    btn.title = "Ke soal "+(i+1);
    btn.addEventListener('click',()=> showPage(i));
    container.appendChild(btn);
  });
}

function renderPages(){
  const pages = document.getElementById('pages');
  pages.innerHTML = "";
  questions.forEach((q,i)=>{
    const page = document.createElement('section');
    page.className = "page";
    page.id = "page-"+i;
    page.setAttribute('data-index', i);
    let html = "<h3>Halaman "+(i+1)+"</h3>";
    html += "<div class='question-text'>"+(q.text? q.text.replace(/\n/g,'<br>'):'')+"</div>";
    if(q.img && q.type === "mcq_img") {
    html += '<img src="'+ASSET_PATH+q.img+'" class="question-img" alt="Gambar soal '+(i+1)+'">';
}
    if(q.type && q.type.includes("audio")) html += '<div style="margin-top:8px;"><button class="audioPlayOnce" data-audio="'+(q.audio||'')+'">Play Audio</button></div>';
    html += '<div class="options">';
    if(q.type === "mcq" || q.type === "mcq_img" || q.type === "mcq_audio"){
      q.options.forEach((opt,idx)=>{
        html += '<div class="option" data-choice="'+(idx+1)+'" tabindex="0"><span class="label">'+(idx+1)+'.</span><span class="opt-text">'+opt+'</span></div>';
      });
    } else if(q.type === "mcq_audio_img"){
      q.img_options.forEach((opt,idx)=>{
        html += '<div class="option" data-choice="'+(idx+1)+'" tabindex="0"><img src="'+ASSET_PATH+opt+'" class="img-option" alt="Pilihan '+(idx+1)+'"></div>';
      });
    } else if(q.type === "mcq_audio_img_mix"){
      if(q.img) html += '<img src="'+ASSET_PATH+q.img+'" class="question-img" alt="Gambar soal '+(i+1)+'">';
      q.audio_options.forEach((aud,idx)=>{
        html += '<div class="option" data-choice="'+(idx+1)+'" tabindex="0"><button class="audioPlayOnce" data-audio="'+aud+'">Play option '+(idx+1)+'</button></div>';
      });
    } else if(q.type === "mcq_audio_options"){
      q.audio_options.forEach((aud,idx)=>{
        html += '<div class="option" data-choice="'+(idx+1)+'" tabindex="0"><button class="audioPlayOnce" data-audio="'+aud+'">Play option '+(idx+1)+'</button></div>';
      });
    } else if(q.type === "mcq_img_options"){
  q.img_options.forEach((opt,idx)=>{
    html += '<div class="option" data-choice="'+(idx+1)+'" tabindex="0">'
         + '<img src="'+ASSET_PATH+opt+'" class="img-option"></div>';
  });
}
    html += "</div>";
    page.innerHTML = html;
    pages.appendChild(page);
  });

  // attach interactions
  document.querySelectorAll('.option').forEach(opt=>{
    opt.addEventListener('click', (e)=>{
      if(submitted) return;
      const choice = parseInt(opt.getAttribute('data-choice'));
      const page = opt.closest('.page');
      const idx = parseInt(page.getAttribute('data-index'));
      page.querySelectorAll('.option').forEach(o=>o.classList.remove('selected'));
      opt.classList.add('selected');
      answers[idx+1] = choice;
      let btn = document.querySelectorAll('#qnumbers button')[idx];
btn.style.backgroundColor = '#007bff';   // biru full
btn.style.color = '#ffffff';             // tulisan putih agar jelas
btn.style.borderColor = '#007bff';       // border ikut biru
  });
    opt.addEventListener('keypress', (e)=>{ if(e.key==='Enter'){ opt.click(); } });
  });

  // audio play once
  function handleAudioButton(btn){
    btn.addEventListener('click', (e)=>{
      e.stopPropagation();
      const src = btn.getAttribute('data-audio');
      if(!src) return;
      if(audioPlayed[src]){ alert('Audio hanya bisa diputar satu kali.'); return; }
      if(playingAudio){ try{ playingAudio.pause(); }catch{} }
      const aud = new Audio(ASSET_PATH + src);
      playingAudio = aud;
      aud.play().catch(()=>{ alert('Gagal memutar audio. Pastikan file ada.'); });
      audioPlayed[src] = true;
      btn.disabled = true;
      btn.textContent = "Played";
      aud.addEventListener('ended', ()=> { playingAudio = null; });
    });
  }
  document.querySelectorAll('.audioPlayOnce').forEach(handleAudioButton);
}

function showPage(i){
  if(i<0) i=0;
  if(i>=questions.length) i=questions.length-1;
  current = i;
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  const p = document.getElementById('page-'+i);
  if(p) p.classList.add('active');
  // Highlight halaman aktif
document.querySelectorAll('#qnumbers button').forEach((btn, idx)=>{
    if(idx === i){
        btn.style.border = "3px solid red";    // border merah tebal
    } else {
        btn.style.border = "1px solid #ccc";   // kembali normal
    }
});
  document.getElementById('prevBtn').disabled = (i===0);
  document.getElementById('nextBtn').disabled = (i===questions.length-1);
}

document.getElementById('prevBtn').addEventListener('click', ()=> showPage(current-1));
document.getElementById('nextBtn').addEventListener('click', ()=> showPage(current+1));
document.getElementById('submitBtn').addEventListener('click', submitQuiz);

function calculateScore(){
  let score = 0;
  questions.forEach((q,idx)=>{
    const user = answers[idx+1];
    if(user && user === q.answer) score++;
  });
  return score;
}

function lockAnswers(){
  submitted = true;
  document.querySelectorAll('.page').forEach((page, idx)=>{
    const q = questions[idx];
    const correct = q.answer;
    const navBtn = document.querySelectorAll('#qnumbers button')[idx];
    const userAns = answers[idx+1];
    if(!userAns){
        // Tidak dijawab → tetap putih
        navBtn.style.backgroundColor = "#ffffff";
        navBtn.style.color = "#000000";
        navBtn.style.borderColor = "#ccc";
    } 
    else if(userAns !== correct){
        // Salah → orange
        navBtn.style.backgroundColor = "#ffb84d";
        navBtn.style.color = "#ffffff";
        navBtn.style.borderColor = "#cc0000";
    }
    const options = page.querySelectorAll('.option');
    options.forEach((opt)=>{
      const choice = parseInt(opt.getAttribute('data-choice'));
      // Kunci opsi
      opt.classList.add('disabled');

      // Jika benar → hijau
      if(choice === correct){
        opt.style.background = "#d4f8d4";
        opt.style.borderColor = "#2ecc71";
      }

      // Jika dipilih tapi salah → merah
      if(answers[idx+1] === choice && choice !== correct){
        opt.style.background = "#ffd6d6";
        opt.style.borderColor = "#e74c3c";
      }
    });
  });

  // Nonaktifkan audio
  document.querySelectorAll('#qnumbers button')[idx].style.borderColor = '#008cff';      // biru tebal
document.querySelectorAll('#qnumbers button')[idx].style.backgroundColor = '#cfe9ff';  // biru muda
}

function submitQuiz(){
  if(!confirm("Yakin ingin submit?")) return;
  if(submitted) return;
  clearInterval(timerInterval);
  const score = calculateScore();
  const box = document.getElementById('scoreBox');
  box.style.display = "block";
  box.innerHTML = "<strong>Skor Anda: "+score+" / "+questions.length+"</strong>";
  lockAnswers();
  box.scrollIntoView({behavior:'smooth'});
}

function autoSubmit(){
  if(submitted) return;
  submitted = true;            // kunci agar tidak double submit
  clearInterval(timerInterval);
  const score = calculateScore();
  const box = document.getElementById('scoreBox');
  box.style.display = "block";
  box.innerHTML = "<strong>Skor Anda: "+score+" / "+questions.length+"</strong>";
  lockAnswers();
  box.scrollIntoView({behavior:'smooth'});
}

window.addEventListener('load', ()=>{ renderQNumbers(); renderPages(); showPage(0); startTimer(); });
</script>
</body>
</html>
    
  </body>
  
</html>
